function cov_1jyiu7wqav(){var path="/home/arthur/Documentos/Trybe/forks/Back-End/28.3/nodejs-jwt-base-project/src/controllers/login.js";var hash="99a38e5d780892dadeb122e2b2d241c2daa330f2";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/arthur/Documentos/Trybe/forks/Back-End/28.3/nodejs-jwt-base-project/src/controllers/login.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:38}},"1":{start:{line:3,column:0},end:{line:19,column:2}},"2":{start:{line:4,column:2},end:{line:18,column:3}},"3":{start:{line:5,column:33},end:{line:5,column:41}},"4":{start:{line:7,column:2},end:{line:8,column:94}},"5":{start:{line:8,column:4},end:{line:8,column:94}},"6":{start:{line:10,column:15},end:{line:10,column:44}},"7":{start:{line:12,column:2},end:{line:13,column:85}},"8":{start:{line:13,column:4},end:{line:13,column:85}},"9":{start:{line:15,column:2},end:{line:15,column:72}},"10":{start:{line:17,column:4},end:{line:17,column:81}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:37},end:{line:19,column:1}},line:3}},branchMap:{"0":{loc:{start:{line:7,column:2},end:{line:8,column:94}},type:"if",locations:[{start:{line:7,column:2},end:{line:8,column:94}},{start:{line:7,column:2},end:{line:8,column:94}}],line:7},"1":{loc:{start:{line:7,column:6},end:{line:7,column:28}},type:"binary-expr",locations:[{start:{line:7,column:6},end:{line:7,column:15}},{start:{line:7,column:19},end:{line:7,column:28}}],line:7},"2":{loc:{start:{line:12,column:2},end:{line:13,column:85}},type:"if",locations:[{start:{line:12,column:2},end:{line:13,column:85}},{start:{line:12,column:2},end:{line:13,column:85}}],line:12},"3":{loc:{start:{line:12,column:6},end:{line:12,column:41}},type:"binary-expr",locations:[{start:{line:12,column:6},end:{line:12,column:11}},{start:{line:12,column:15},end:{line:12,column:41}}],line:12}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"99a38e5d780892dadeb122e2b2d241c2daa330f2"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1jyiu7wqav=function(){return actualCoverage;};}return actualCoverage;}cov_1jyiu7wqav();const User=(cov_1jyiu7wqav().s[0]++,require('../models/user'));cov_1jyiu7wqav().s[1]++;module.exports=async(req,res)=>{cov_1jyiu7wqav().f[0]++;cov_1jyiu7wqav().s[2]++;try{const{username,password}=(cov_1jyiu7wqav().s[3]++,req.body);cov_1jyiu7wqav().s[4]++;if((cov_1jyiu7wqav().b[1][0]++,!username)||(cov_1jyiu7wqav().b[1][1]++,!password)){cov_1jyiu7wqav().b[0][0]++;cov_1jyiu7wqav().s[5]++;return res.status(401).json({message:'É necessário usuário e senha para fazer login'});}else{cov_1jyiu7wqav().b[0][1]++;}const user=(cov_1jyiu7wqav().s[6]++,await User.findUser(username));cov_1jyiu7wqav().s[7]++;if((cov_1jyiu7wqav().b[3][0]++,!user)||(cov_1jyiu7wqav().b[3][1]++,user.password!==password)){cov_1jyiu7wqav().b[2][0]++;cov_1jyiu7wqav().s[8]++;return res.status(401).json({message:'Usuário não existe ou senha inválida'});}else{cov_1jyiu7wqav().b[2][1]++;}cov_1jyiu7wqav().s[9]++;return res.status(200).json({message:'Login efetuado com sucesso'});}catch(err){cov_1jyiu7wqav().s[10]++;return res.status(500).json({message:'Erro interno',error:err.message});}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxvZ2luLmpzIl0sIm5hbWVzIjpbIlVzZXIiLCJyZXF1aXJlIiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcSIsInJlcyIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJib2R5Iiwic3RhdHVzIiwianNvbiIsIm1lc3NhZ2UiLCJ1c2VyIiwiZmluZFVzZXIiLCJlcnIiLCJlcnJvciJdLCJtYXBwaW5ncyI6IjZ3RUFlWTsyRkFmWixLQUFNQSxDQUFBQSxJQUFJLDBCQUFHQyxPQUFPLENBQUMsZ0JBQUQsQ0FBVixDQUFWLEMsd0JBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixNQUFPQyxHQUFQLENBQVlDLEdBQVosR0FBb0IsaURBQ25DLEdBQUksQ0FDSixLQUFNLENBQUVDLFFBQUYsQ0FBWUMsUUFBWiwyQkFBeUJILEdBQUcsQ0FBQ0ksSUFBN0IsQ0FBTixDQURJLHdCQUdKLEdBQUksNkJBQUNGLFFBQUQsK0JBQWEsQ0FBQ0MsUUFBZCxDQUFKLENBQ0UsMERBQU9GLENBQUFBLEdBQUcsQ0FBQ0ksTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQUVDLE9BQU8sQ0FBRSwrQ0FBWCxDQUFyQixDQUFQLENBQTBGLENBRDVGLGlDQUdBLEtBQU1DLENBQUFBLElBQUksMEJBQUcsS0FBTVosQ0FBQUEsSUFBSSxDQUFDYSxRQUFMLENBQWNQLFFBQWQsQ0FBVCxDQUFWLENBTkksd0JBUUosR0FBSSw2QkFBQ00sSUFBRCwrQkFBU0EsSUFBSSxDQUFDTCxRQUFMLEdBQWtCQSxRQUEzQixDQUFKLENBQ0UsMERBQU9GLENBQUFBLEdBQUcsQ0FBQ0ksTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQUVDLE9BQU8sQ0FBRSxzQ0FBWCxDQUFyQixDQUFQLENBQWlGLENBRG5GLGlDQVJJLHdCQVdKLE1BQU9OLENBQUFBLEdBQUcsQ0FBQ0ksTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQUVDLE9BQU8sQ0FBRSw0QkFBWCxDQUFyQixDQUFQLENBQ0MsQ0FBQyxNQUFPRyxHQUFQLENBQVksMEJBQ1osTUFBT1QsQ0FBQUEsR0FBRyxDQUFDSSxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FBRUMsT0FBTyxDQUFFLGNBQVgsQ0FBMkJJLEtBQUssQ0FBRUQsR0FBRyxDQUFDSCxPQUF0QyxDQUFyQixDQUFQLENBQ0QsQ0FDRixDQWhCRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFzeW5jIChyZXEsIHJlcykgPT4ge1xuICB0cnkge1xuICBjb25zdCB7IHVzZXJuYW1lLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgaWYgKCF1c2VybmFtZSB8fCAhcGFzc3dvcmQpXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAxKS5qc29uKHsgbWVzc2FnZTogJ8OJIG5lY2Vzc8OhcmlvIHVzdcOhcmlvIGUgc2VuaGEgcGFyYSBmYXplciBsb2dpbicgfSk7XG5cbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZFVzZXIodXNlcm5hbWUpO1xuXG4gIGlmICghdXNlciB8fCB1c2VyLnBhc3N3b3JkICE9PSBwYXNzd29yZClcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oeyBtZXNzYWdlOiAnVXN1w6FyaW8gbsOjbyBleGlzdGUgb3Ugc2VuaGEgaW52w6FsaWRhJyB9KTtcblxuICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTG9naW4gZWZldHVhZG8gY29tIHN1Y2Vzc28nfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvIGludGVybm8nLCBlcnJvcjogZXJyLm1lc3NhZ2UgfSk7XG4gIH1cbn07XG4iXX0=